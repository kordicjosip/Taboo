<div id="forma">
  <!-- TODO testirati prikaz polja iako je logiran korisnik sa njegovim podatcima i disableati input -->
  <div *ngIf="!isLoggedIn()" class=drugikorak
       style="color: white; text-align: center; font-weight: 700; font-size: 23px; padding-top:160px; margin-bottom: 30px; padding-left: 5px">3. UNESITE VAŠE
    PODATKE
  </div>
  <div *ngIf="!isLoggedIn()" class="p-field p-grid">
    <div class="p-col">
      <input #name="ngModel" (ngModelChange)="rezervacijeService.ime.next(ime)" [(ngModel)]="ime" class="form-control"
             id="firstname3" pInputText placeholder="Ime"
             required type="text">
      <div *ngIf="name.invalid && (name.dirty || name.touched)" class="alert">
        <div *ngIf="name.errors?.required" style="color:white; margin-left: 15px">
          Ime je obavezno.
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="isLoggedIn()" class="p-field p-grid">
    <div class="p-col">
      <input [(ngModel)]="ime" id="firstname2" pInputText value="{{ime}}" [disabled]="true">
    </div>
  </div>
  <div *ngIf="!isLoggedIn()" class="p-field p-grid">
    <div class="p-col">
      <input #surname="ngModel" (ngModelChange)="rezervacijeService.prezime.next(prezime)" [(ngModel)]="prezime"
             class="form-control" id="lastname3" pInputText
             placeholder="Prezime"
             required type="text">
      <div *ngIf="surname.invalid && (surname.dirty || surname.touched)" class="alert">
        <div *ngIf="surname.errors?.required" style="color:white; margin-left: 15px">
          Prezime je obavezno.
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="isLoggedIn()" class="p-field p-grid">
    <div class="p-col">
      <input [(ngModel)]="prezime" id="lastname2" pInputText value="{{prezime}}" [disabled]="true">
    </div>
  </div>
  <div *ngIf="!isLoggedIn()" class="p-field p-grid">
    <div class="p-col">
      <p-inputMask #phonenumber="ngModel" (ngModelChange)="rezervacijeService.brojtelefona.next(brojtelefona)"
                   [(ngModel)]="brojtelefona" class="form-control" id="phonenumber"
                   mask="+387 99 999 999" placeholder="Broj telefona"></p-inputMask>
    </div>
  </div>
  <div *ngIf="isLoggedIn()" class="p-field p-grid">
    <div class="p-col">
      <input [(ngModel)]="brojtelefona" id="phonenumber2" pInputText value="{{brojtelefona}}" [disabled]="true">
    </div>
  </div>
  </div>
  <div class="p-field p-grid" id="napomena">
      <textarea (ngModelChange)="rezervacijeService.napomena.next(napomena)" [(ngModel)]="napomena" pInputTextarea
                placeholder="Napomena (opcionalno)"
                style="resize: none; width: 240px; color: white; "></textarea>
  </div>

  <div class="tipka">
    <button (click)="back()" class="p-button-raised p-button-success p-button-text" id="backtipka"
            label="<- Back" pButton
            pRipple></button>
    <button *ngIf="!isImeEmpty() && !isPrezimeEmpty() && isBrojFull()" (click)="rezerviraj()" class="p-button-raised p-button-success p-button-text" id="rezervirajtipka"
            label="Rezerviraj" pButton
            pRipple></button>
    <button *ngIf="!isLoggedIn() && (isImeEmpty() || isPrezimeEmpty() || !isBrojFull())" [disabled]="true"
            class="p-button-raised p-button-success p-button-text" id="rezervirajtipkaDisabled"
            label="Rezerviraj" pButton
            pRipple></button>
  </div>


<p-confirmDialog #cd [closeOnEscape]="true" [dismissableMask]="true" [style]="{width: '50vw'}">
  <ng-template pTemplate="header">
    <h3>Unesite ključ koji ste dobili putem SMS poruke:</h3>
  </ng-template>
  <ng-template pTemplate="footer">
    <p-inputMask #sms [(ngModel)]="smskey" mask="999999" placeholder="SMS ključ"
                 styleClass="p-inputtext-confirmdialog"></p-inputMask>
    <div style="float: right">
      <button (click)="cd.reject()" class="p-button-warning p-button-text" icon="pi pi-check"
              label="Nisam dobio/dobila poruku"
              pButton
              type="button"></button>
      <button (click)="cd.accept()" icon="pi pi-check" label="Potvrdi" pButton
              type="button"></button>
    </div>
  </ng-template>
</p-confirmDialog>
